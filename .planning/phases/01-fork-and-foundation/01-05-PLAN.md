---
phase: 01-fork-and-foundation
plan: 05
type: execute
wave: 3
depends_on:
  - 01-04
files_modified:
  - ~/.claude/commands/mow/ (29 command files)
  - ~/.claude/commands/mow/migrate.md
autonomous: true
requirements:
  - CORE-01
  - CORE-06

must_haves:
  truths:
    - "All /mow:* commands exist and reference workflows at ~/.claude/mowism/workflows/"
    - "User can invoke /mow:new-project, /mow:execute-phase, /mow:plan-phase, /mow:verify-work and each loads the correct workflow"
    - "/mow:migrate creates a backup of .planning/, replaces GSD strings in-place, and auto-commits"
    - "/mow:join-discord is NOT present (dropped per research recommendation)"
    - "/mow:update advises git-pull, not npm install"
    - "No command file contains 'gsd' or 'get-shit-done' strings"
  artifacts:
    - path: "~/.claude/commands/mow/new-project.md"
      provides: "/mow:new-project command registration"
      contains: "name: mow:new-project"
    - path: "~/.claude/commands/mow/execute-phase.md"
      provides: "/mow:execute-phase command registration"
      contains: "name: mow:execute-phase"
    - path: "~/.claude/commands/mow/plan-phase.md"
      provides: "/mow:plan-phase command registration"
      contains: "name: mow:plan-phase"
    - path: "~/.claude/commands/mow/migrate.md"
      provides: "/mow:migrate command for GSD-to-Mowism migration"
      contains: "name: mow:migrate"
    - path: "~/.claude/commands/mow/verify-work.md"
      provides: "/mow:verify-work command registration"
      contains: "name: mow:verify-work"
  key_links:
    - from: "~/.claude/commands/mow/*.md"
      to: "~/.claude/mowism/workflows/*.md"
      via: "@ file references in execution_context"
      pattern: "@~/.claude/mowism/workflows/"
    - from: "~/.claude/commands/mow/*.md"
      to: "~/.claude/mowism/references/*.md"
      via: "@ file references"
      pattern: "@~/.claude/mowism/references/"
    - from: "~/.claude/commands/mow/migrate.md"
      to: ".planning/"
      via: "backup-then-replace migration logic"
      pattern: ".planning"
---

<objective>
Fork 29 GSD command files from `~/.claude/commands/gsd/` into `~/.claude/commands/mow/` with full rebranding, drop the `join-discord` command, and create the new `/mow:migrate` command for GSD-to-Mowism migration.

Purpose: Commands are the user-facing interface — the `/mow:*` slash commands that users type. They are lightweight wrappers that reference workflows via `@` paths. With workflows in place from Plan 04, commands can now correctly reference them.

Output: 29 rebranded command files + 1 new migrate command = 30 total in `~/.claude/commands/mow/`.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-fork-and-foundation/01-RESEARCH.md
@.planning/phases/01-fork-and-foundation/01-CONTEXT.md

Prior plan summaries (needed for path validation):
@.planning/phases/01-fork-and-foundation/01-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fork and rebrand 29 command files</name>
  <files>~/.claude/commands/mow/ (29 files)</files>
  <action>
    1. Create `~/.claude/commands/mow/` directory if it does not exist.
    2. Copy all command files from `~/.claude/commands/gsd/` to `~/.claude/commands/mow/` EXCEPT:
       - `join-discord.md` — DROP this command (per research recommendation, don't link to GSD's Discord under Mowism brand)
       - `new-project.md.bak` — DROP (backup file, not a command)
    3. For each copied file, apply the full ordered replacement table:
       a. `~/.claude/get-shit-done/` -> `~/.claude/mowism/`
       b. `get-shit-done` -> `mowism`
       c. `~/.gsd/` -> `~/.mowism/`
       d. `.gsd/` -> `.mowism/`
       e. `gsd/phase-` -> `mow/phase-`
       f. `gsd-tools.cjs` -> `mow-tools.cjs`
       g. `gsd-tools` -> `mow-tools`
       h. All 11 agent name replacements
       i. `/gsd:` -> `/mow:`
       j. `GSD ►` -> `MOW ▶`, `GSD ▶` -> `MOW ▶`
       k. Standalone `GSD` in brand contexts -> `MOW`
    4. Update YAML frontmatter `name:` field from `gsd:*` to `mow:*` in every file.
    5. The `update.md` command should reference the rebranded `update.md` workflow (which already has the git-pull placeholder from Plan 04).

    The 29 command files to fork (alphabetical):
    add-phase, add-todo, audit-milestone, check-todos, cleanup, complete-milestone, debug, discuss-phase, execute-phase, health, help, insert-phase, list-phase-assumptions, map-codebase, new-milestone, new-project, pause-work, plan-milestone-gaps, plan-phase, progress, quick, reapply-patches, remove-phase, research-phase, resume-work, set-profile, settings, update, verify-work

    Note: `reapply-patches.md` is forked as-is (rebranded) per research recommendation.
  </action>
  <verify>
    Run `ls ~/.claude/commands/mow/ | wc -l` — should return 29 (before migrate.md is added).
    Run `test -f ~/.claude/commands/mow/join-discord.md && echo "ERROR: should not exist" || echo "OK: dropped"` — should say "OK: dropped".
    Run `grep -rl 'gsd\|get-shit-done' ~/.claude/commands/mow/` — should return no files.
    Run `grep 'name: mow:execute-phase' ~/.claude/commands/mow/execute-phase.md` — should match.
    Run `grep '@~/.claude/mowism/workflows/' ~/.claude/commands/mow/execute-phase.md` — should match.
  </verify>
  <done>
    29 command files exist in `~/.claude/commands/mow/` (join-discord dropped, new-project.md.bak excluded), all with `name: mow:*` frontmatter, all referencing `~/.claude/mowism/` paths, and zero GSD/get-shit-done strings.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create /mow:migrate command</name>
  <files>~/.claude/commands/mow/migrate.md</files>
  <action>
    Create `~/.claude/commands/mow/migrate.md` as a NEW command file (not a fork of any GSD file).

    YAML frontmatter:
    ```yaml
    ---
    name: mow:migrate
    description: Migrate an existing GSD .planning/ directory to Mowism format
    allowed-tools:
      - Read
      - Write
      - Edit
      - Bash
      - Glob
      - Grep
    ---
    ```

    Command body — implement the migration workflow per locked decisions from CONTEXT.md:

    **Step 1: Pre-flight checks**
    - Verify `.planning/` directory exists in current project root
    - Verify it contains files (not empty)
    - Warn user what will happen: backup, then in-place replacement, then auto-commit

    **Step 2: Backup**
    - Copy `.planning/` to `.planning.backup.{unix_timestamp}/` as a sibling directory
    - Verify backup was created successfully
    - Print the restore command: `rm -rf .planning/ && mv .planning.backup.{ts}/ .planning/`

    **Step 3: String replacement (in-place on .planning/ files)**
    Apply replacements in specificity order to ALL files in `.planning/`:
    1. `~/.claude/get-shit-done/` -> `~/.claude/mowism/`
    2. `get-shit-done` -> `mowism`
    3. `~/.gsd/` -> `~/.mowism/`
    4. `.gsd/` -> `.mowism/`
    5. `gsd/phase-` -> `mow/phase-`
    6. `gsd/{milestone}` -> `mow/{milestone}`
    7. `/gsd:` -> `/mow:`
    8. `gsd-tools.cjs` -> `mow-tools.cjs`
    9. `gsd-tools` -> `mow-tools`
    10. All 11 agent name replacements (gsd-planner -> mow-planner, etc.)
    11. `GSD ►` -> `MOW ▶`, `GSD ▶` -> `MOW ▶`
    12. Remaining standalone `GSD` in brand contexts -> `MOW` (only in banner/status contexts, not in prose discussing GSD origin)
    - Also update `model_overrides` keys in `config.json` if present (e.g., `"gsd-executor"` key -> `"mow-executor"`)
    - Leave phase numbers, plan content, progress data, and decision logs unchanged (per research: migration only touches GSD-specific strings, not semantic content)

    **Step 4: Verification**
    - Grep all `.planning/` files for remaining `gsd` strings
    - Any remaining occurrences must be in prose context (decision logs mentioning GSD) not in functional references
    - Print a summary of files modified and any remaining `gsd` strings with context

    **Step 5: Auto-commit**
    - Stage all changed files in `.planning/`
    - Commit with message: `chore: migrate .planning/ from GSD to Mowism format`
    - Per locked decision: auto-commits after migration completes (single commit with all changes)

    **Error handling (Claude's discretion):**
    - If any step fails, print the restore command and stop
    - Do NOT auto-commit if verification found functional `gsd` references (step 4 failures)
    - Partial migrations of mid-execution state are safe — the replacements only touch GSD-specific strings, not semantic content
  </action>
  <verify>
    Run `test -f ~/.claude/commands/mow/migrate.md && echo "exists"` — should say "exists".
    Run `grep 'name: mow:migrate' ~/.claude/commands/mow/migrate.md` — should match.
    Verify the file contains backup, replacement, verification, and auto-commit steps.
    Verify allowed-tools includes Read, Write, Edit, Bash, Glob, Grep.
  </verify>
  <done>
    `/mow:migrate` command file exists with complete migration workflow: pre-flight checks, backup to `.planning.backup.{timestamp}/`, ordered string replacements, verification grep, and auto-commit. The command handles error recovery by printing restore instructions. No GSD strings in the command file itself.
  </done>
</task>

</tasks>

<verification>
1. `ls ~/.claude/commands/mow/ | wc -l` returns 30 (29 forked + 1 migrate)
2. `grep -rl 'gsd\|get-shit-done' ~/.claude/commands/mow/` returns empty
3. All command frontmatter uses `name: mow:*`
4. All `@` references point to `~/.claude/mowism/` paths
5. `migrate.md` exists with backup, replace, verify, commit workflow
6. `join-discord.md` does NOT exist in the mow directory
</verification>

<success_criteria>
- 29 forked command files + 1 new migrate command = 30 total in ~/.claude/commands/mow/
- All commands use mow:* names and reference mowism paths
- join-discord dropped, reapply-patches kept
- /mow:migrate implements full backup-replace-verify-commit workflow per CONTEXT.md decisions
- Zero GSD references in any command file
</success_criteria>

<output>
After completion, create `.planning/phases/01-fork-and-foundation/01-05-SUMMARY.md`
</output>
