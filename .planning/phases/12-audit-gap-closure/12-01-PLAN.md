---
phase: 12-audit-gap-closure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - mowism/workflows/execute-plan.md
  - mowism/workflows/new-project.md
  - mowism/workflows/resume-project.md
  - mowism/templates/summary-standard.md
  - mowism/templates/summary-complex.md
  - mowism/templates/summary-minimal.md
  - bin/mow-tools.cjs
  - .planning/ROADMAP.md
  - .planning/PROJECT.md
autonomous: true
requirements:
  - STATE-03
  - FEED-01
  - DOC-02

must_haves:
  truths:
    - "SendMessage recipient field is 'lead' in both execute-plan.md and mow-phase-worker.md"
    - "All four SUMMARY template variants include requirements-completed in YAML frontmatter"
    - "cmdSummaryExtract output includes requirements_completed field"
    - "ROADMAP.md and PROJECT.md say '35' commands, not '34'"
    - "Team lead spawn calls include explicit name: 'lead' parameter"
  artifacts:
    - path: "mowism/workflows/execute-plan.md"
      provides: "Corrected SendMessage recipient"
      contains: 'recipient: "lead"'
    - path: "mowism/templates/summary-standard.md"
      provides: "requirements-completed field in frontmatter"
      contains: "requirements-completed"
    - path: "mowism/templates/summary-complex.md"
      provides: "requirements-completed field in frontmatter"
      contains: "requirements-completed"
    - path: "mowism/templates/summary-minimal.md"
      provides: "requirements-completed field in frontmatter"
      contains: "requirements-completed"
    - path: "bin/mow-tools.cjs"
      provides: "requirements_completed in cmdSummaryExtract output"
      contains: "requirements_completed"
  key_links:
    - from: "mowism/workflows/execute-plan.md"
      to: "agents/mow-phase-worker.md"
      via: "SendMessage recipient field"
      pattern: 'recipient: "lead"'
    - from: "mowism/templates/summary-standard.md"
      to: "bin/mow-tools.cjs"
      via: "YAML frontmatter key parsed by cmdSummaryExtract"
      pattern: "requirements.completed"
---

<objective>
Standardize SendMessage recipient name, add requirements-completed to SUMMARY template variants, and fix stale "34 commands" count in planning documents.

Purpose: Close three integration and documentation gaps identified by the v1.1 milestone audit. These are small, well-scoped fixes -- no new features or architectural changes.

Output: 9 files edited with consistent messaging, complete templates, and accurate counts.
</objective>

<execution_context>
@/home/max/.claude/get-shit-done/workflows/execute-plan.md
@/home/max/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-audit-gap-closure/12-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Standardize SendMessage recipient to "lead"</name>
  <files>
    mowism/workflows/execute-plan.md
    mowism/workflows/new-project.md
    mowism/workflows/resume-project.md
  </files>
  <action>
    1. In `mowism/workflows/execute-plan.md` line 379, change `recipient: "team-lead"` to `recipient: "lead"`. This is the only occurrence in that file. Do NOT touch `agents/mow-phase-worker.md` -- it already uses `"lead"` consistently.

    2. In `mowism/workflows/new-project.md` around line 1042, add `name="lead",` parameter to the Task() call that spawns the team lead. The Task() call starts at line 1042 with `Task(` and has `subagent_type="mow-team-lead"` on line 1043. Add `name="lead",` on a new line after `subagent_type="mow-team-lead",`. This is defensive hardening to guarantee the team lead's registered name matches what workers use in their recipient fields.

    3. In `mowism/workflows/resume-project.md` around line 81, add `name="lead",` parameter to the Task() call. Same pattern: add after `subagent_type="mow-team-lead",` on line 82.

    Do NOT change historical documents (07-04-PLAN.md, v1.1-MILESTONE-AUDIT.md) -- they represent state at time of writing.
  </action>
  <verify>
    Run: `grep -n 'recipient: "team-lead"' mowism/workflows/execute-plan.md` -- should return nothing.
    Run: `grep -n 'recipient: "lead"' mowism/workflows/execute-plan.md` -- should return line 379.
    Run: `grep -n 'name="lead"' mowism/workflows/new-project.md mowism/workflows/resume-project.md` -- should return one hit per file.
  </verify>
  <done>
    execute-plan.md uses `recipient: "lead"` matching mow-phase-worker.md. Both team lead spawn calls include explicit `name="lead"` parameter. No "team-lead" string remains in any active workflow instruction file.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add requirements-completed to SUMMARY template variants and extraction function</name>
  <files>
    mowism/templates/summary-standard.md
    mowism/templates/summary-complex.md
    mowism/templates/summary-minimal.md
    bin/mow-tools.cjs
  </files>
  <action>
    1. In `mowism/templates/summary-standard.md`, add `requirements-completed: []` to the YAML frontmatter. Place it after the `key-decisions:` line (line 15) and before the `duration:` line (line 16). This matches the field ordering in the main `summary.md` template.

    2. In `mowism/templates/summary-complex.md`, add `requirements-completed: []` after the `patterns-established:` block (line 21) and before `duration:` (line 22). This matches the main template's field order where requirements-completed comes after patterns-established.

    3. In `mowism/templates/summary-minimal.md`, add `requirements-completed: []` after `key-decisions: []` (line 15) and before `duration:` (line 16).

    4. In `bin/mow-tools.cjs`, in the `cmdSummaryExtract` function around line 3493-3500, add `requirements_completed: fm['requirements-completed'] || [],` to the `fullResult` object. Place it after the `decisions` line (line 3499). Note: YAML key uses hyphen (`requirements-completed`), JS output uses underscore (`requirements_completed`) -- this follows the existing convention (e.g., `key-files` -> `key_files`, `tech-stack` -> `tech_added`).

    Do NOT modify the main `summary.md` template -- it already has the field. Do NOT modify existing SUMMARY.md files in completed phases -- they already have the field populated.
  </action>
  <verify>
    Run: `grep 'requirements-completed' mowism/templates/summary-standard.md mowism/templates/summary-complex.md mowism/templates/summary-minimal.md` -- should return one hit per file.
    Run: `grep 'requirements_completed' bin/mow-tools.cjs` -- should return at least one hit in the cmdSummaryExtract function.
    Run: `node bin/mow-tools.cjs summary-extract .planning/phases/11-readme-overhaul/11-01-SUMMARY.md --raw` -- output should include `requirements_completed` field with populated array.
  </verify>
  <done>
    All four SUMMARY template variants (summary.md, summary-standard.md, summary-complex.md, summary-minimal.md) include `requirements-completed: []` in YAML frontmatter. The `cmdSummaryExtract` function in mow-tools.cjs exposes `requirements_completed` in its output JSON, making the field visible to audit and planning tools.
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix stale "34 commands" count in ROADMAP.md and PROJECT.md</name>
  <files>
    .planning/ROADMAP.md
    .planning/PROJECT.md
  </files>
  <action>
    1. In `.planning/ROADMAP.md` line 40, change "all 34 commands" to "all 35 commands":
       Before: `Lifecycle narrative, all 34 commands, brownfield entry`
       After: `Lifecycle narrative, all 35 commands, brownfield entry`

    2. In `.planning/ROADMAP.md` line 116, change "All 34+" to "All 35":
       Before: `All 34+ /mow:* commands are documented`
       After: `All 35 /mow:* commands are documented`

    3. In `.planning/PROJECT.md` line 34, change "all 34 commands" to "all 35 commands":
       Before: `all 34 commands documented`
       After: `all 35 commands documented`

    4. In `.planning/PROJECT.md` line 63, change "all 34 commands" to "all 35 commands":
       Before: `all 34 commands`
       After: `all 35 commands`

    Do NOT change historical documents: MILESTONES.md, v1.0 audit files, v1.0 verification files, research files, or completed SUMMARY files. Those reflected accurate counts at time of writing (v1.0 had 34 commands; `close-shop` was added in v1.1). Do NOT change REQUIREMENTS.md -- it already says "35".
  </action>
  <verify>
    Run: `grep -n 'all 34 commands\|All 34' .planning/ROADMAP.md .planning/PROJECT.md` -- should return nothing.
    Run: `grep -n 'all 35 commands\|All 35' .planning/ROADMAP.md .planning/PROJECT.md .planning/REQUIREMENTS.md` -- should return hits in all three files.
  </verify>
  <done>
    ROADMAP.md and PROJECT.md both say "35 commands" (matching REQUIREMENTS.md). No stale "34" count remains in any active planning document. Historical documents remain unchanged.
  </done>
</task>

</tasks>

<verification>
1. Recipient consistency: `grep -rn 'recipient:.*"team-lead"' mowism/ agents/` returns zero hits. `grep -rn 'recipient:.*"lead"' mowism/workflows/execute-plan.md agents/mow-phase-worker.md` returns consistent results.
2. Template completeness: `grep -l 'requirements-completed' mowism/templates/summary*.md` returns all four template files.
3. Extraction function: `node bin/mow-tools.cjs summary-extract .planning/phases/11-readme-overhaul/11-01-SUMMARY.md --raw | grep requirements_completed` returns a populated array.
4. Count accuracy: `grep -rn '"34 commands"\|34 commands\|all 34\|All 34' .planning/ROADMAP.md .planning/PROJECT.md .planning/REQUIREMENTS.md` returns zero hits.
5. Defensive naming: `grep -n 'name="lead"' mowism/workflows/new-project.md mowism/workflows/resume-project.md` returns one hit per file.
</verification>

<success_criteria>
- SendMessage `recipient` is `"lead"` in both execute-plan.md and mow-phase-worker.md
- Team lead Task() spawn calls in new-project.md and resume-project.md include `name="lead"`
- All four SUMMARY template variants have `requirements-completed: []` in frontmatter
- `cmdSummaryExtract` output includes `requirements_completed` field
- ROADMAP.md and PROJECT.md say "35 commands", not "34"
- No historical/completed documents modified
</success_criteria>

<output>
After completion, create `.planning/phases/12-audit-gap-closure/12-01-SUMMARY.md`
</output>
